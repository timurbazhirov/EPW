<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>2.3 Run examples</TITLE>
<META NAME="description" CONTENT="2.3 Run examples">
<META NAME="keywords" CONTENT="users-guide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="users-guide.css">

<LINK REL="next" HREF="node11.html">
<LINK REL="previous" HREF="node9.html">
<LINK REL="up" HREF="node7.html">
<LINK REL="next" HREF="node11.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html337"
  HREF="node11.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.gif"></A> 
<A NAME="tex2html333"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.gif"></A> 
<A NAME="tex2html327"
  HREF="node9.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.gif"></A> 
<A NAME="tex2html335"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html338"
  HREF="node11.html">2.4 Installation Issues</A>
<B> Up:</B> <A NAME="tex2html334"
  HREF="node7.html">2 Installation</A>
<B> Previous:</B> <A NAME="tex2html328"
  HREF="node9.html">2.2 Compile</A>
   <B>  <A NAME="tex2html336"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00033000000000000000"></A>
  <A NAME="runexamples"></A>
<BR>
2.3 Run examples
</H2>

<P>
As a final check that compilation was successful, you may want to run
some or all of the examples contained within the <TT>examples</TT>
directory of the Quantum-ESPRESSO distribution.
Those examples try to exercise all the programs and features of the
Quantum-ESPRESSO package. A list of examples and of what each example
does is contained in <TT>examples/README</TT>. For details, see the 
<TT>README</TT> file in each example's directory. 
If you find that any relevant feature isn't being tested, please
contact us (or even better, write and send us a new example
yourself!).

<P>
If you haven't downloaded the full Quantum-ESPRESSO distribution and don't
have the examples, you can get them from the Test and Examples Page of
the Quantum-ESPRESSO web site
(<A NAME="tex2html28"
  NAME="http://www.pwscf.org/tests.htm"><TT>http://www.pwscf.org/tests.htm</TT></A>).
The necessary pseudopotentials are included.

<P>
To run the examples, you should follow this procedure:

<P>

<OL>
<LI>Go to the <TT>examples</TT> directory and edit the
<TT>environment_variables</TT> file, setting the following variables
as needed:
<BLOCKQUOTE>
<TT>BIN_DIR=</TT> directory where Quantum-ESPRESSO executables reside
<BR>  <TT>PSEUDO_DIR=</TT> directory where pseudopotential files reside
<BR>  <TT>TMP_DIR=</TT> directory to be used as temporary storage area

</BLOCKQUOTE>
If you have downloaded the full Quantum-ESPRESSO distribution, you may set
<TT>BIN_DIR=$TOPDIR/bin</TT> and
<TT>PSEUDO_DIR=$TOPDIR/pseudo</TT>, where <TT>$TOPDIR</TT> is the
root of the Quantum-ESPRESSO source tree.

<P>
In order to be able to run all the examples, the <TT>PSEUDO_DIR</TT>
directory must contain the following files:    
<BLOCKQUOTE>
<DIV ALIGN="LEFT">
<TT>Al.vbc.UPF</TT>,
    <TT>As.gon.UPF</TT>,
    <TT>C.pz-rrkjus.UPF</TT>,
    <TT>Cu.pz-d-rrkjus.UPF</TT>,
    <TT>Fe.pz-nd-rrkjus.UPF</TT>,
    <TT>H.fpmd.UPF</TT>,
    <TT>H.vbc.UPF</TT>,
    <TT>N.BLYP.UPF</TT>,
    <TT>Ni.pbe-nd-rrkjus.UPF</TT>,
    <TT>NiUS.RRKJ3.UPF</TT>,
    <TT>O.BLYP.UPF</TT>,
    <TT>O.LDA.US.RRKJ3.UPF</TT>,
    <TT>O.pbe-rrkjus.UPF</TT>,
    <TT>O.vdb.UPF</TT>,
    <TT>OPBE_nc.UPF</TT>,
    <TT>Pb.vdb.UPF</TT>,
    <TT>Ptrel.RRKJ3.UPF</TT>,
    <TT>Si.vbc.UPF</TT>,
    <TT>SiPBE_nc.UPF</TT>,
    <TT>Ti.vdb.UPF</TT>
  
</DIV>
</BLOCKQUOTE>
If any of these are missing, you can download them (and many others) from the
Pseudopotentials Page of the Quantum-ESPRESSO web site
(<A NAME="tex2html29"
  NAME="http://www.pwscf.org/pseudo.htm"><TT>http://www.pwscf.org/pseudo.htm</TT></A>).

<P>
<TT>TMP_DIR</TT> must be a directory you have read and write access
to, with enough available space to host the temporary files produced
by the example runs, and possibly offering high I/O performance (i.e.,
don't use an NFS-mounted directory).

<P>
</LI>
<LI>If you have compiled the parallel version of Quantum-ESPRESSO (this
is the default if parallel libraries are detected), you will usually 
have to specify a driver program (such as
<TT>poe</TT> or <TT>mpiexec</TT>) and the number of processors: read
section <A HREF="node12.html#runparallel">3</A>, ``Running on parallel machines'' for
details.

<P>
In order to do that, edit again the <TT>environment_variables</TT>
file and set the <TT>PARA_PREFIX</TT> and <TT>PARA_POSTFIX</TT>
variables as needed.
Parallel executables will be run by a command like this:
<PRE>
  $PARA_PREFIX pw.x $PARA_POSTFIX &lt; file.in &gt; file.out
</PRE>

<P>
For example, if the command line is like this (as for an IBM SP4):
<PRE>
  poe pw.x -procs 4 &lt; file.in &gt; file.out
</PRE>
you should set <TT>PARA_PREFIX="poe"</TT>,
<TT>PARA_POSTFIX="-procs 4"</TT>.

<P>
Furthermore, if your machine does not support interactive use, you
must run the commands specified below through the batch queueing
system installed on that machine.
Ask your system administrator for instructions.

<P>
</LI>
<LI>To run a single example, go to the corresponding directory (for
instance, <TT>example/example01</TT>) and execute:
<PRE>
  ./run_example
</PRE>
This will create a subdirectory <TT>results</TT>, containing the input
and output files generated by the calculation.

<P>
Some examples take only a few seconds to run, while others may require
several minutes depending on your system.

<P>
To run all the examples in one go, execute:
<PRE>
  ./run_all_examples
</PRE>
from the <TT>examples</TT> directory.
On a single-processor machine, this typically takes one to three
hours.

<P>
The <TT>make_clean</TT> script cleans the examples tree, by removing
all the <TT>results</TT> subdirectories.  However, if additional
subdirectories have been created, they aren't deleted.

<P>
</LI>
<LI>In each example's directory, the <TT>reference</TT> subdirectory
contains verified output files, that you can check your results
against.
They were generated on a Linux PC using the Intel compiler.
On different architectures the precise numbers could be slightly
different, in particular if different FFT dimensions are automatically
selected.  For this reason, a plain <TT>diff</TT> of your results
against the reference data doesn't work, or at least, it requires
human inspection of the results.

<P>
Instead, you can run the <TT>check_example</TT> script in the
<TT>examples</TT> directory:

<P>
<BR>

<P>
    <TT>./check_example</TT> <I>example_dir</I>

<P>
<BR>

<P>
where <I>example_dir</I> is the directory of the example that you
want to check (e.g., <TT>./check_example example01</TT>).
You can specify multiple directories.

<P>
Note: at the moment <TT>check_example</TT> is in early development
and (should be) guaranteed to work only on examples 01 to 04.
</LI>
</OL>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html337"
  HREF="node11.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.gif"></A> 
<A NAME="tex2html333"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.gif"></A> 
<A NAME="tex2html327"
  HREF="node9.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.gif"></A> 
<A NAME="tex2html335"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html338"
  HREF="node11.html">2.4 Installation Issues</A>
<B> Up:</B> <A NAME="tex2html334"
  HREF="node7.html">2 Installation</A>
<B> Previous:</B> <A NAME="tex2html328"
  HREF="node9.html">2.2 Compile</A>
   <B>  <A NAME="tex2html336"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Paolo Giannozzi
2008-05-14
</ADDRESS>
</BODY>
</HTML>
