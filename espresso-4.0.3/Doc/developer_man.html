<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="Developer Manual,Developer Manual,Bibliography,Main Page,Methodological Background,User Guide" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/wiki/opensearch_desc.php" title="QuantumEspresso (English)" />
    <title>Developer Manual - QuantumEspresso</title>
    <style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/wiki/skins/monobook/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="/wiki/skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if gte IE 6]><style type="text/css">@import "/wiki/skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="/wiki/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="/wiki/index.php?title=-&amp;action=raw&amp;gen=js"></script>    <script type="text/javascript" src="/wiki/skins/common/wikibits.js"></script>
    <style type="text/css">/*<![CDATA[*/
@import "/wiki/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>              </head>
  <body                 class="ns-0">
    <div id="globalWrapper">
      <div id="column-content">
      <!--  inizio cut A3 -->
      <div class="portlet" id="p-personal">
	  <h5>Personal tools</h5>
	  <div class="pBody">
	    <ul>
	    <li id="pt-login"><a href="/wiki/index.php?title=Special:Userlogin&amp;returnto=Developer_Manual">Log in / create account</a></li>	    </ul>
	  </div>
	</div> 
	<!-- fine cut A3-->
      <!-- inizio paste A2 -->
      	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="/wiki/index.php/Developer_Manual">Article</a></li><li id="ca-talk"
	       class="new"	       ><a href="/wiki/index.php?title=Talk:Developer_Manual&amp;action=edit">Discussion</a></li><li id="ca-edit"
	       	       ><a href="/wiki/index.php?title=Developer_Manual&amp;action=edit">Edit</a></li><li id="ca-history"
	       	       ><a href="/wiki/index.php?title=Developer_Manual&amp;action=history">History</a></li>	  </ul>
	</div> 
	<!-- fine paste A2-->
	
	<div id="content">
	  <a name="top" id="contentTop"></a>
	  	  <h1 class="firstHeading">Developer Manual</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From QuantumEspresso</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2"><a href="#Who_should_read_.28and_who_should_write.29_this_guide"><span class="tocnumber">1.1</span> <span class="toctext">Who should read (and who should write) this guide</span></a></li>
<li class="toclevel-2"><a href="#Who_may_read_this_guide_but_will_not_necessarily_profit_from_it"><span class="tocnumber">1.2</span> <span class="toctext">Who may read this guide but will not necessarily profit from it</span></a></li>
<li class="toclevel-2"><a href="#How_to_Contribute_to_Quantum-ESPRESSO"><span class="tocnumber">1.3</span> <span class="toctext">How to Contribute to Quantum-ESPRESSO</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Structure_of_the_distribution"><span class="tocnumber">2</span> <span class="toctext">Structure of the distribution</span></a>
<ul>
<li class="toclevel-2"><a href="#Contents_of_the_various_directories"><span class="tocnumber">2.1</span> <span class="toctext">Contents of the various directories</span></a>
<ul>
<li class="toclevel-3"><a href="#Modules"><span class="tocnumber">2.1.1</span> <span class="toctext">Modules</span></a></li>
<li class="toclevel-3"><a href="#Sources"><span class="tocnumber">2.1.2</span> <span class="toctext">Sources</span></a></li>
<li class="toclevel-3"><a href="#Utilities"><span class="tocnumber">2.1.3</span> <span class="toctext">Utilities</span></a></li>
<li class="toclevel-3"><a href="#Libraries"><span class="tocnumber">2.1.4</span> <span class="toctext">Libraries</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Installation_mechanism"><span class="tocnumber">2.2</span> <span class="toctext">Installation mechanism</span></a>
<ul>
<li class="toclevel-3"><a href="#How_to_edit_the_configure_script"><span class="tocnumber">2.2.1</span> <span class="toctext">How to edit the configure script</span></a></li>
<li class="toclevel-3"><a href="#How_to_add_support_for_a_new_architecture"><span class="tocnumber">2.2.2</span> <span class="toctext">How to add support for a new architecture</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Adding_new_directories_or_routines"><span class="tocnumber">2.3</span> <span class="toctext">Adding new directories or routines</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Algorithms"><span class="tocnumber">3</span> <span class="toctext">Algorithms</span></a>
<ul>
<li class="toclevel-2"><a href="#Diagonalization"><span class="tocnumber">3.1</span> <span class="toctext">Diagonalization</span></a></li>
<li class="toclevel-2"><a href="#Self-consistency"><span class="tocnumber">3.2</span> <span class="toctext">Self-consistency</span></a></li>
<li class="toclevel-2"><a href="#Structural_optimization"><span class="tocnumber">3.3</span> <span class="toctext">Structural optimization</span></a></li>
<li class="toclevel-2"><a href="#Symmetrization"><span class="tocnumber">3.4</span> <span class="toctext">Symmetrization</span></a></li>
<li class="toclevel-2"><a href="#Gamma_tricks"><span class="tocnumber">3.5</span> <span class="toctext">Gamma tricks</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Structure_of_the_code"><span class="tocnumber">4</span> <span class="toctext">Structure of the code</span></a>
<ul>
<li class="toclevel-2"><a href="#Modules_and_global_variables"><span class="tocnumber">4.1</span> <span class="toctext">Modules and global variables</span></a></li>
<li class="toclevel-2"><a href="#Meaning_of_the_most_important_variables"><span class="tocnumber">4.2</span> <span class="toctext">Meaning of the most important variables</span></a></li>
<li class="toclevel-2"><a href="#Conventions_for_indices"><span class="tocnumber">4.3</span> <span class="toctext">Conventions for indices</span></a></li>
<li class="toclevel-2"><a href="#Preprocessing"><span class="tocnumber">4.4</span> <span class="toctext">Preprocessing</span></a></li>
<li class="toclevel-2"><a href="#Performance_issues"><span class="tocnumber">4.5</span> <span class="toctext">Performance issues</span></a></li>
<li class="toclevel-2"><a href="#Portability_issues"><span class="tocnumber">4.6</span> <span class="toctext">Portability issues</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Parallelization"><span class="tocnumber">5</span> <span class="toctext">Parallelization</span></a>
<ul>
<li class="toclevel-2"><a href="#Paradigms"><span class="tocnumber">5.1</span> <span class="toctext">Paradigms</span></a></li>
<li class="toclevel-2"><a href="#Implementation"><span class="tocnumber">5.2</span> <span class="toctext">Implementation</span></a>
<ul>
<li class="toclevel-3"><a href="#Data_distribution"><span class="tocnumber">5.2.1</span> <span class="toctext">Data distribution</span></a></li>
<li class="toclevel-3"><a href="#Parallel_fft"><span class="tocnumber">5.2.2</span> <span class="toctext">Parallel fft</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#File_Formats"><span class="tocnumber">6</span> <span class="toctext">File Formats</span></a>
<ul>
<li class="toclevel-2"><a href="#Data_file.28s.29"><span class="tocnumber">6.1</span> <span class="toctext">Data file(s)</span></a>
<ul>
<li class="toclevel-3"><a href="#Rationale"><span class="tocnumber">6.1.1</span> <span class="toctext">Rationale</span></a></li>
<li class="toclevel-3"><a href="#General_structure"><span class="tocnumber">6.1.2</span> <span class="toctext">General structure</span></a></li>
<li class="toclevel-3"><a href="#Structure_of_file_.22data-file.xml.22"><span class="tocnumber">6.1.3</span> <span class="toctext">Structure of file "data-file.xml"</span></a></li>
<li class="toclevel-3"><a href="#Sample"><span class="tocnumber">6.1.4</span> <span class="toctext">Sample</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Restart_files"><span class="tocnumber">6.2</span> <span class="toctext">Restart files</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Modifying.2Fadding.2Fextending_Quantum-ESPRESSO"><span class="tocnumber">7</span> <span class="toctext">Modifying/adding/extending Quantum-ESPRESSO</span></a>
<ul>
<li class="toclevel-2"><a href="#Hints.2C_Caveats.2C_Do.27s_and_Dont.27s"><span class="tocnumber">7.1</span> <span class="toctext">Hints, Caveats, Do's and Dont's</span></a></li>
<li class="toclevel-2"><a href="#Programming_style_.28or_lack_of_it.29"><span class="tocnumber">7.2</span> <span class="toctext">Programming style (or lack of it)</span></a></li>
<li class="toclevel-2"><a href="#Adding_or_modifying_input_variables"><span class="tocnumber">7.3</span> <span class="toctext">Adding or modifying input variables</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Using_CVS"><span class="tocnumber">8</span> <span class="toctext">Using CVS</span></a>
<ul>
<li class="toclevel-2"><a href="#Anonymous_CVS"><span class="tocnumber">8.1</span> <span class="toctext">Anonymous CVS</span></a></li>
<li class="toclevel-2"><a href="#Read.2FWrite_CVS"><span class="tocnumber">8.2</span> <span class="toctext">Read/Write CVS</span></a></li>
<li class="toclevel-2"><a href="#CVS_operations"><span class="tocnumber">8.3</span> <span class="toctext">CVS operations</span></a></li>
<li class="toclevel-2"><a href="#Web-CVS_interface"><span class="tocnumber">8.4</span> <span class="toctext">Web-CVS interface</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Introduction"></a><h2><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a>]</span> <span class="mw-headline"> Introduction</span></h2>
<a name="Who_should_read_.28and_who_should_write.29_this_guide"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=2" title="Edit section: Who should read (and who should write) this guide">edit</a>]</span> <span class="mw-headline"> Who should read (and who should <i>write</i>) this guide</span></h3>
<p>The intended audience of this guide is everybody who wants to:
</p>
<ol><li> know how Quantum-ESPRESSO works, including its internals
</li><li> modify/customize/add/extend/improve/clean up Quantum-ESPRESSO
</li><li> know how to read data produced by Quantum-ESPRESSO
</li></ol>
<p>The same category of people should also <i>write</i> this guide, of course.
</p>
<a name="Who_may_read_this_guide_but_will_not_necessarily_profit_from_it"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=3" title="Edit section: Who may read this guide but will not necessarily profit from it">edit</a>]</span> <span class="mw-headline"> Who may read this guide but will not necessarily profit from it</span></h3>
<p>People who want to know about the capabilities of Quantum-ESPRESSO,
or who want just to use Quantum-ESPRESSO, should read the <a href="/wiki/index.php/User_Guide" title="User Guide">User Guide</a>.
</p><p>People who want to know about the methods or the physics
behind Quantum-ESPRESSO should read first the relevant  Literature
(see <a href="/wiki/index.php/Bibliography#Reference_Papers" title="Bibliography">Bibliography#Reference Papers</a>), then the <a href="/wiki/index.php/Methodological_Background" title="Methodological Background">Methodological Background</a>.
</p>
<a name="How_to_Contribute_to_Quantum-ESPRESSO"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=4" title="Edit section: How to Contribute to Quantum-ESPRESSO">edit</a>]</span> <span class="mw-headline"> How to Contribute to Quantum-ESPRESSO</span></h3>
<p>You can contribute to a better Quantum-ESPRESSO by
</p>
<ol><li> answering other people's questions on the mailing list (correct answers are strongly preferred to wrong ones).
</li><li>  suggesting changes: note however that suggestions requiring a significant amount of work are welcome only if accompanied by implementation or by a promise of future implementation (fulfilled promises are strongly preferred to forgotten ones).
</li><li> porting to new/unsupported architectures or configurations: see the <a href="/wiki/index.php/Developer_Manual#Installation_mechanism" title="Developer Manual">Developer Manual#Installation_mechanism</a> section. You shouldn't need new preprocessing flags: those already existing should be sufficient. If you really need a new one, look into file include/defs.h.README to learn what is there and how it is used.
</li><li> pointing out bugs in the software and in the documentation (reports of real bugs are strongly preferred to reports of nonexistent bugs). A bug report should include enough information to be reproduced: typically, version number, hardware/software combination(s) for which the problem arises, whether it is reproducible or erratic, whether it happens in serial or parallel execution or both, and, most important, an input and output exhibiting such behavior (fast to execute if possible). The error message alone is usually not a sufficient piece of information.
</li><li> adding new features to the code. If you like to have something added to Quantum-ESPRESSO, contact the developers. Unless there are technical reasons not to include your changes, we will try to make you happy (no warranty that we will actually succeed).
</li></ol>
<p>For extensive changes, the ideal procedure is as follows:
</p>
<ol><li> download the current CVS version (see <a href="/wiki/index.php/Developer_Manual#Using_CVS" title="Developer Manual">Developer Manual#Using CVS</a>) and work on that version
</li><li> when you are happy with your modified version, make a copy of it, then update your copy with cvs update
</li><li> if you get no conflicts and everything is still working, you have won. Send the modified files to the developers.
</li><li> if you get conflicts, or if the updated code doesn't work any longer, you haven't yet won. Look into the conflicting section: in most cases conflicts are trivial (format changes, white spaces) or easily solved (the part of the code you were modifying has been moved to another place, for instance). Sometimes, somebody else has done changes that are incompatible with yours during the same period. Look into the ChangeLog (use the script cvs2cl.pl to get an updated ChangeLog) to understand what may have happened.  Use cvs update -D 2006-oct-12 to update to the CVS version of 12 oct 2006: this may be useful if you suspect that the incompatibile change happened after that date. CVS versions can be <i>tagged</i>; tags are visible with cvs status -v. Use cvs update -r TAG to update to the CVS version with tag TAG. In all cases, use cvs update -A to revert to the last version.
</li></ol>
<p>Developers can be contacted at the mail address: <b>developers</b> <i>at</i> <b>pwscf</b> <i>dot</i> <b>org</b>.
</p>
<a name="Structure_of_the_distribution"></a><h2><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=5" title="Edit section: Structure of the distribution">edit</a>]</span> <span class="mw-headline"> Structure of the distribution</span></h2>
<a name="Contents_of_the_various_directories"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=6" title="Edit section: Contents of the various directories">edit</a>]</span> <span class="mw-headline"> Contents of the various directories</span></h3>
<a name="Modules"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=7" title="Edit section: Modules">edit</a>]</span> <span class="mw-headline"> Modules</span></h4>
<a name="Sources"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=8" title="Edit section: Sources">edit</a>]</span> <span class="mw-headline"> Sources</span></h4>
<a name="Utilities"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=9" title="Edit section: Utilities">edit</a>]</span> <span class="mw-headline"> Utilities</span></h4>
<a name="Libraries"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=10" title="Edit section: Libraries">edit</a>]</span> <span class="mw-headline"> Libraries</span></h4>
<p>Subdirectory flib/ contains libraries written in fortran77 (*.f) and in fortran-90 (*.f90).
The latter should not depend on any module, except for "kind" and "constants".
</p><p>Subdirectory clib/ contains libraries written in C (*.c). Functions that are called by fortran
should be preprocessed using the macros:
</p>
<ul><li> F77_FUNC (func,FUNC) for function "func", not containing underscore(s) in name 
</li><li> F77_FUNC_(f_nc,F_NC) for function "f_nc", containing underscore(s) in name
</li></ul>
<p>These macros are defined in file include/c_defs.h. This file must be included by all *.c files.
The macros are automagically generated by "configure" and choose the correct case 
(lowercase or uppercase) and the correct number of final underscores. 
See file include/defs.h.README for more info.
</p>
<a name="Installation_mechanism"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=11" title="Edit section: Installation mechanism">edit</a>]</span> <span class="mw-headline"> Installation mechanism</span></h3>
<p>The code contains C-style preprocessing directives. There are two ways to do preprocessing of fortran files:
</p>
<ol><li> directly with the fortran compiler, if supported;
</li><li> by first pre-compiling with the C preprocessor cpp.
</li></ol>
<p>In the first case, one needs to specify in the make.sys file the fortran compiler option that tells the compiler to pre-process first. In the second case, one needs to
specify the C precompiler and options (if needed) in make.sys.
Normally, "configure" should take care of this.
</p><p><br />
</p>
<a name="How_to_edit_the_configure_script"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=12" title="Edit section: How to edit the configure script">edit</a>]</span> <span class="mw-headline"> How to edit the configure script</span></h4>
<p>The "configure" script is generated from its source file
"configure.ac" by the GNU Autoconf utility
(<a href="http://www.gnu.org/software/autoconf/" class="external free" title="http://www.gnu.org/software/autoconf/" rel="nofollow">http://www.gnu.org/software/autoconf/</a>).  Don't edit "configure"
directly: whenever it gets regenerated, your changes will be lost.
Instead, edit "configure.ac", then run "autoconf" to regenerate
"configure". If you want to keep the old "configure", make a copy
first.
</p><p>GNU Autoconf is installed by default on most Unix/Linux systems.  If
you don't have it on your system, you'll have to install it.  Also, if
it bumps an error message saying "configure.in not found", you'll have
to install a more recent version.  Version 2.53 at least is known to
work.
</p><p>"configure.ac" is a regular Bourne shell script (i.e., "sh" -- not csh!), 
except that:
- capitalized names starting with "AC_" are Autoconf macros.  Normally
you shouldn't have to touch them.
- square brackets are normally removed by the macro processor.  If you
need a square bracket (that should be very rare), you'll have to write two.
</p><p>You may refer to the GNU Autoconf Manual for more info.
</p><p>"make.sys.in" is the source file for "make.sys", that "configure"
generates: you might want to edit that file as well.  The generation
procedure is as follows: if "configure.ac" contains the macro
"AC_SUBST(name)", then every occurrence of "@name@" in the source
file will be substituted with the value of the shell variable "name"
at the point where AC_SUBST was called.
</p><p>Similarly, "configure.msg" is generated from "configure.msg.in": this
file is only used by "configure" to print its final report, and isn't
needed for the compilation.  We did it this way so that our
"configure" may also be used by other projects, just by replacing the
Quantum-ESPRESSO-specific "configure.msg.in" by your own.
</p><p>"configure" writes a detailed log of its operation to "config.log".
When any configuration step fails, you may look there for the relevant
error messages.  Note that it is normal for some checks to fail.
</p>
<a name="How_to_add_support_for_a_new_architecture"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=13" title="Edit section: How to add support for a new architecture">edit</a>]</span> <span class="mw-headline">How to add support for a new architecture</span></h4>
<p>In order to support a previously unsupported architecture, first you
have to figure out which compilers, compilation flags, libraries
etc. should be used on that architecture.
In other words, you have to write a "make.sys" that works: you may use
the manual configuration procedure for that (see the Quantum-ESPRESSO
User Guide).  Then, you have to modify "configure" so that it can
generate that "make.sys" automatically.
</p><p>To do that, you have to add the case for your architecture in several
places throughout "configure.ac":
</p>
<ul><li> 1) Detect architecture
</li></ul>
<p>Look for these lines:
</p>
<pre> if test "$arch" = ""
 then
         case $host in
                 ia64-*-linux-gnu )      arch=ia64  &nbsp;;;
                 x86_64-*-linux-gnu )    arch=and64 &nbsp;;;
                 *-pc-linux-gnu )        arch=ia32  &nbsp;;;
                 etc.
</pre>
<p>Here you must add an entry corresponding to your architecture and
operating system.  Run "config.guess" to obtain the string identifying
your system.
For instance on a PC it may be "i686-pc-linux-gnu", while on IBM SP4
"powerpc-ibm-aix5.1.0.0".  It is convenient to put some asterisks to
account for small variations of the string for different machines of
the same family.  For instance, it could be "aix4.3" instead of
"aix5.1", or "athlon" instead of "i686"...
</p>
<ul><li> 2)  Select compilers
</li></ul>
<p>Look for these lines:
</p>
<pre> # candidate compilers and flags based on architecture
 case $arch in
 ia64 | amd64 )
       ...
 ia32 )
       ...
 aix )
       ...
 etc.
</pre>
<p>Add an entry for your value of $arch, and set there the appropriate
values for several variables, if needed (all variables are assigned
some reasonable default value, defined before the "case" block):
</p><p>- "try_f90" should contain the list of candidate Fortran 90 compilers,
in order of decreasing preference (i.e. configure will use the first
it finds).  If your system has parallel compilers, you should list
them in "try_mpif90".
</p><p>- "try_ar", "try_arflags": for these, the values "ar" and "ruv" should
be always fine, unless some special flag is required (e.g., -X64
With sp4).  
</p><p>- you should define "try_dflags" if the Quantum-ESPRESSO codes contain any
"#ifdef" specific to your machine: for instance, on IBM machines,
"try_dflags=-D__AIX" . A list of such flags can be found in file 
include/defs.h.README
</p><p>You shouldn't need to define the following two:
</p><p>- "try_arflags_dynamics" should be set to the same as "try_arflags"
except in special cases in which dynamically libraries are to be
built (presently only on PowerPC Mac with OS-X and xlf compiler)
</p><p>- "try_iflags" should be set to the appropriate "-I" option(s)
needed by the preprocessor or by the compiler to locate *.h files
to be included; try_iflags="-I../include" should be good for most cases
</p><p>For example, here's the entry for IBM machines running AIX:
</p>
<pre>  aix )
       try_mpif90="mpxlf90_r mpxlf90"
       try_f90="xlf90_r xlf90 $try_f90"
       try_arflags="-X64 ruv"
       try_arflags_dynamic="-X64 ruv"
       try_dflags="-D__AIX -D__XLF"
      &nbsp;;;
</pre>
<p>The following step is to look for both serial and parallel fortran
compilers:
</p>
<pre> # check serial Fortran 90 compiler...
 ...
 AC_PROG_F77($f90)
 ...
       # check parallel Fortran 90 compiler
 ...
       AC_PROG_F77($mpif90)
 ...
 echo setting F90... $f90
 echo setting MPIF90... $mpif90
</pre>
<p>A few compilers require some extra work here: for instance, if the
Intel Fortran compiler was selected, you need to know which version
because different versions need different flags.
</p><p>At the end of the test, 
- $mpif90 is the parallel compiler, if any; if no parallel compiler is found or if --disable-parallel was specified, $mpif90 is the serial compiler
- $f90 is the serial compiler
</p><p>Next step: the choice of (serial) C and Fortran 77 compilers.
Look for these lines:
</p>
<pre> # candidate C and f77 compilers good for all cases
 try_cc="cc gcc"
 try_f77="$f90"
</pre>
<pre> case "$arch:$f90" in
 *:f90 )
       ....
 etc.
</pre>
<p>Here you have to add an entry for your architecture, and since the 
correct choice of C and f77 compilers may depend on the fortran-90 
compiler, you may need to specify the f90 compiler as well.
Again, specify the compilers in try_cc and try_f77 in order of 
decreasing preference.  At the end of the test, 
- $cc is the C compiler
- $f77 is the Fortran 77 compiler, used to compile *.f files
(may coincide with $f90)
</p>
<ul><li> 3) Specify compilation flags.
</li></ul>
<p>Look for these lines:
</p>
<pre> # check Fortran compiler flags
 ...
 case "$arch:$f90" in
 ia64:ifort* | amd64:ifort* )
       ...
 ia64:ifc* )
       ...
 etc.
</pre>
<p>Add an entry for your case and define:
</p><p>- "try_fflags": flags for Fortran 77 compiler.
</p><p>- "try_f90flags": flags for Fortran 90 compiler.
In most cases they will be the same as in Fortran 77 plus some
others.  In that case, define them as "\$(FFLAGS) -something_else".
</p><p>- "try_fflags_noopt": flags for Fortran 77 with all optimizations
turned off: this is usually "-O0".
These flags must be used for compiling flib/dlamch.f (part of our
version of Lapack): it won't work properly with optimization.
</p><p>- "try_ldflags": flags for the linking phase (not including the list
of libraries: this is decided later). 
</p><p>- "try_ldflags_static": additional flags to select static compilation
(i.e., don't use shared libraries).
</p><p>- "try_dflags": must be defined if there is in the code any #ifdef
specific to your compiler (for instance, -D__INTEL for Intel
compilers).  Define it as "$try_dflags -D..." so that pre-existing
flags, if any, are preserved.
</p><p>- if the Fortran 90 compiler is not able to invoke the C preprocessor
automatically before compiling, set "have_cpp=0" (the opposite case
is the default). The appropriate compilation rules will be generated 
accordingly. If the compiler requires that any flags be specified in
order to invoke the preprocessor (for example, "-fpp " -- note the 
space), specify them in "pre_fdflags".
</p><p>For example, here's the entry for ifort on Linux PC:
</p>
<pre> ia32:ifort* )
         try_fflags="-O2 -tpp6 -assume byterecl"
         try_f90flags="\$(FFLAGS) -nomodule"
         try_fflags_noopt="-O0 -assume byterecl"
         try_ldflags=""
         try_ldflags_static="-static"
         try_dflags="$try_dflags -D__INTEL"
         pre_fdflags="-fpp "
        &nbsp;;;
</pre>
<p>Next step: flags for the C compiler. Look for these lines:
</p>
<pre> case "$arch:$cc" in
 *:icc )
       ...
 *:pgcc )
       ...
 etc.
</pre>
<p>Add an entry for your case and define:
</p><p>- "try_cflags": flags for C compiler.
</p><p>- "c_ldflags": flags for linking, when using the C compiler as linker.
This is needed to check for libraries written in C, such as FFTW.
</p><p>- if you need a different preprocessor from the standard one ($CC -E),
define it in "try_cpp".
</p><p>For example for XLC on AIX:
</p>
<pre> aix:mpcc* | aix:xlc* | aix:cc )
         try_cflags="-q64 -O2"
         c_ldflags="-q64"
        &nbsp;;;
</pre>
<p>Finally, if you have to use a nonstandard preprocessor, look for these
lines:
</p>
<pre> echo $ECHO_N "setting CPPFLAGS... $ECHO_C"
 case $cpp in
       cpp) try_cppflags="-P -traditional"&nbsp;;;
       fpp) try_cppflags="-P"             &nbsp;;;
       ...
</pre>
<p>and set "try_cppflags" as appropriate.
</p>
<ul><li> 4) Search for libraries
</li></ul>
<p>To instruct "configure" to search for libraries, you must tell it two
things: the names of libraries it should search for, and where it
should search.
</p><p>The following libraries are searched for:
</p><p>- BLAS or equivalent. 
Some vendor replacements for BLAS that are supported by Quantum-ESPRESSO are:
</p>
<pre>   MKL on Linux
   ACML on Linux amd64
   essl on AIX
   complib.sgimath on sgi origin
   SCSL on sgi altix
   SUNperf on sparc
   cxml on alpha
</pre>
<p>Moreover, ATLAS is used over BLAS if available.
</p><p>- LAPACK or equivalent. Some vendor replacements for LAPACK that are supported by Quantum-ESPRESSO are:
</p>
<pre>   mkl on linux
   SUNperf on sparc
</pre>
<p>- FFTW (version 2.x) or another supported FFT library. The latter include:
</p>
<pre>   essl on aix
   SUNperf on sparc
</pre>
<p>- the MASS vector math library on aix
</p><p>- an MPI library. This is often automatically linked by the compiler
</p><p>If you have another replacement for the above libraries, you'll have
to insert a new entry in the appropriate place.
</p><p>This is unfortunately a little bit too complex to explain.
Basic info: "AC_SEARCH_LIBS(function, name, ...)" looks for symbol
"function" in library "libname".  If that is found, "-lname" is
appended to the LIBS environment variable (initially empty).
The real thing is more complicated than just that because the
"-Ldirectory" option must be added to search in a nonstandard
directory, and because a given library may require other libraries as
prerequisites (for example, Lapack requires BLAS).
</p>
<a name="Adding_new_directories_or_routines"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=14" title="Edit section: Adding new directories or routines">edit</a>]</span> <span class="mw-headline"> Adding new directories or routines</span></h3>
<a name="Algorithms"></a><h2><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=15" title="Edit section: Algorithms">edit</a>]</span> <span class="mw-headline"> Algorithms</span></h2>
<a name="Diagonalization"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=16" title="Edit section: Diagonalization">edit</a>]</span> <span class="mw-headline"> Diagonalization</span></h3>
<a name="Self-consistency"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=17" title="Edit section: Self-consistency">edit</a>]</span> <span class="mw-headline"> Self-consistency</span></h3>
<a name="Structural_optimization"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=18" title="Edit section: Structural optimization">edit</a>]</span> <span class="mw-headline"> Structural optimization</span></h3>
<a name="Symmetrization"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=19" title="Edit section: Symmetrization">edit</a>]</span> <span class="mw-headline"> Symmetrization</span></h3>
<a name="Gamma_tricks"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=20" title="Edit section: Gamma tricks">edit</a>]</span> <span class="mw-headline"> Gamma tricks</span></h3>
<p>In calculations using only the <span class="texhtml">&Gamma;</span> point (k=0),
the Kohn-Sham orbitals can be chosen to be real functions in 
real space, so that 
</p><p><span class="texhtml">&psi;(<i>G</i>) = &psi;<sup> * </sup>( &minus; <i>G</i>).</span>
</p><p>This allows us to store only half of the Fourier components.
Moreover, two real FFTs can be performed as a single complex FFT.
The auxiliary complex function <span class="texhtml">&Phi;</span> is introduced:
</p><p><span class="texhtml">&Phi;(<i>r</i>) = &psi;<sub><i>j</i></sub>(<i>r</i>) + <i>i</i>&psi;<sub><i>j</i> + 1</sub>(<i>r</i>)</span>
</p><p>whose Fourier transform <span class="texhtml">&Phi;(<i>G</i>)</span> yields
</p><p><img class='tex' src="/wiki/images/math/5/4/6/546e972a31c7fc878c0bd93c10b18807.png" alt="\psi_j    (G) =  {\Phi(G) + \Phi^*(G)\over 2},    \psi_{j+1}(G) =  {\Phi(G) - \Phi^*(G)\over 2i}." />
</p><p>A side effect on parallelization is that <span class="texhtml"><i>G</i></span> and <span class="texhtml"> &minus; <i>G</i></span> must
reside on the same processor. As a consequence, pairs of columns
with <img class='tex' src="/wiki/images/math/2/3/2/2321f29c808e867ffbbd24087afa765a.png" alt="G_{n'_1,n'_2,n'_3}" /> and <img class='tex' src="/wiki/images/math/c/0/3/c0303c7224c5c87ba0404fff3fe6d53d.png" alt="G_{-n'_1,-n'_2,n'_3}" />
(with the exception of the case <span class="texhtml"><i>n</i>'<sub>1</sub> = <i>n</i>'<sub>2</sub> = 0</span>),
must be assigned to the same processor.
</p>
<a name="Structure_of_the_code"></a><h2><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=21" title="Edit section: Structure of the code">edit</a>]</span> <span class="mw-headline"> Structure of the code</span></h2>
<a name="Modules_and_global_variables"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=22" title="Edit section: Modules and global variables">edit</a>]</span> <span class="mw-headline"> Modules and global variables</span></h3>
<a name="Meaning_of_the_most_important_variables"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=23" title="Edit section: Meaning of the most important variables">edit</a>]</span> <span class="mw-headline"> Meaning of the most important variables</span></h3>
<a name="Conventions_for_indices"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=24" title="Edit section: Conventions for indices">edit</a>]</span> <span class="mw-headline"> Conventions for indices</span></h3>
<a name="Preprocessing"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=25" title="Edit section: Preprocessing">edit</a>]</span> <span class="mw-headline"> Preprocessing</span></h3>
<p>The code contains C-style preprocessing directives. Most fortran compilers directly support them; some don't, and preprocessing is <i>hand-made</i> by the makefile using the C preprocessor cpp. The C preprocessor may:
</p>
<ol><li> assign a value to a given expression. For instance, command #define THIS that, or the option in the command line: -DTHIS=that, will replace all occurrence of THIS with that.
</li><li> include file (command #include)
</li><li> expand macros (command #define)
</li><li> execute conditional expressions such as
</li></ol>
<pre>
  #ifdef __expression
    ...code A...
  #else
    ...code B...
  #endif
</pre> If <i>expression</i> is defined (with a #define command or from the command line with option -D__expression), then ...code A... is sent to output; otherwise ...code B... is sent to output.
<p>The file include/defs.h.README contains a list of definitions that are used in the code. In order to make  preprocessing options easy to see, preprocessing variables should start with 
two underscores, as __expression in the above example. Traditionally <i>preprocessed</i> variables are also written in uppercase.
</p>
<a name="Performance_issues"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=26" title="Edit section: Performance issues">edit</a>]</span> <span class="mw-headline"> Performance issues</span></h3>
<a name="Portability_issues"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=27" title="Edit section: Portability issues">edit</a>]</span> <span class="mw-headline"> Portability issues</span></h3>
<a name="Parallelization"></a><h2><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=28" title="Edit section: Parallelization">edit</a>]</span> <span class="mw-headline"> Parallelization</span></h2>
<p>In parallel execution, PW starts N independent processes (do not start more than one per processor!) that communicate via calls to MPI libraries. Each process has its own set of variables and knows nothing about other processes' variables. Variables that take little memory are replicated, those that take a lot of memory (wavefunctions, G-vectors, R-space grid) are distributed.
</p><p>Beware: replicated calculations may either be performed independently on each processor, or performed on one processor and broadcast to all
others. The first approach requires less programming, but it is unsafe: in principle all processors should yield exactly the same results, if they work on the same data, but sometimes they don't (depending on the machine, compiler, and libraries). Even a tiny difference in the last significant digit can eventually cause serious trouble if allowed to build up, especially when a replicated check is performed (in which
case the code may <i>hang</i> if the check yields different results on different processors). Never assume that the value of a variable produced by replicated calculations is exactly the same on all processors: when in doubt, broadcast the value calculated on a specific processor (the <i>root</i> processor) to all others.
</p>
<a name="Paradigms"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=29" title="Edit section: Paradigms">edit</a>]</span> <span class="mw-headline"> Paradigms</span></h3>
<a name="Implementation"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=30" title="Edit section: Implementation">edit</a>]</span> <span class="mw-headline"> Implementation</span></h3>
<a name="Data_distribution"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=31" title="Edit section: Data distribution">edit</a>]</span> <span class="mw-headline"> Data distribution</span></h4>
<p>Quantum-Espresso employ arrays whose memory requirements fall 
into three categories.
</p><p><i>Fully Scalable</i>: Arrays that are distributed across processors of a pool.
Fully scalable arrays are typically large to very large and contain one 
of the following dimensions:
</p>
<ul><li> number of plane waves, npw (or max number, npwx)
</li><li> number of Gvectors, ngm
</li><li> number of grid points in the R space, nrxx
</li></ul>
<p>Their size decreases linearly with the number of processors in a pool. 
</p><p><i>Partially Scalable</i>: Arrays that are distributed across processors of the
ortho or diag group. Typically they are much smaller than fully scalable
array, and small in absolute terms for moderate-size system. Their size
however increases quadratically with the number of atoms in the system,
so they have to be distributed for large systems (hundreds to thousands
atoms). Partially scalable arrays contain none of the dimensions listed 
above, two of the following dimensions:
</p>
<ul><li> number of states, nbnd
</li><li> number of projectors, nkb
</li></ul>
<p>Their size decreases linearly with the number of processors in a ortho
or diag group. 
</p><p><i>Nonscalable</i>: All the remaining arrays, that are not distributed across
processors. These are typically small arrays, having dimensions like for
instance:
</p>
<ul><li> number of atoms, nat
</li><li> number of species of atoms, nsp
</li></ul>
<p>The size of these arrays is independent on the number of processors.
</p>
<a name="Parallel_fft"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=32" title="Edit section: Parallel fft">edit</a>]</span> <span class="mw-headline"> Parallel fft</span></h4>
<a name="File_Formats"></a><h2><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=33" title="Edit section: File Formats">edit</a>]</span> <span class="mw-headline"> File Formats</span></h2>
<a name="Data_file.28s.29"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=34" title="Edit section: Data file(s)">edit</a>]</span> <span class="mw-headline"> Data file(s)</span></h3>
<p>Quantum-Espresso restart file specifications:
Paolo Giannozzi scripsit AD 2005-11-11,
Last modified by Andrea Ferretti 2006-10-29
</p>
<a name="Rationale"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=35" title="Edit section: Rationale">edit</a>]</span> <span class="mw-headline">Rationale</span></h4>
<p>Requirements: the data file should be
</p>
<ul><li> efficient (quick to read and write)
</li><li> easy to read, parse and write without special libraries
</li><li> easy to understand (self-documented)
</li><li> portable across different software packages
</li><li> portable across different computer architectures 
</li></ul>
<p>Solutions:
</p>
<ul><li> use binary I/O for large records
</li><li> exploit the file system for organizing data
</li><li> use XML
</li><li> use a small specialized library (iotk) to read, parse, write 
</li><li> ensure the possibility to convert to a portable formatted file
</li></ul>
<p>Integration with other packages:
</p>
<ul><li> provide a self-standing (code-independent) library to read/write this format
</li><li> the use of this library is intended to be at high level, hiding low-level details
</li></ul>
<a name="General_structure"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=36" title="Edit section: General structure">edit</a>]</span> <span class="mw-headline">General structure</span></h4>
<p>Format name: <b>QEXML</b> <br />
Format version: <b>1.4.0</b> <br />
</p><p>The "restart file" is actually a "restart directory", containing several files and sub-directories. 
For CP/FPMD, the restart directory is created as "$prefix_$ndw/", where $prefix is the value of the 
variable"prefix". $ndw the value of variable ndw, both read in input; it is read from "$prefix_$ndr/", 
where $ndr the value of variable ndr, read from input.
For PWscf, both input and output directories are called "$prefix.save/".
</p><p>The content of the restart directory is as follows:
</p>
<pre>   <i>data-file.xml</i>          which contains:
                              - general information that doesn't require large data set: 
                                atomic structure, lattice, symmetries, parameters of the run, ...
                              - pointers to other files or directories containing bulkier data:
                                such as grids, wavefunctions, charge density, potentials, ...
     
   <i>charge_density.dat</i>     contains the charge density
   <i>spin_polarization.dat</i>  contains the spin polarization (rhoup-rhodw) (LSDA calculations)
   <i>magnetization.x.dat</i>    
   <i>magnetization.y.dat</i>    contain the spin polarization along x,y,z (noncollinear calculations)  
   <i>magnetization.z.dat</i> 
   <i>lambda.dat</i>             contains occupations (Car-Parrinello dynamics only
   <i>mat_z.1</i>                contains occupations (ensemble-dynamics only)
   
   &lt;pseudopotentials&gt;     A copy of all pseudopotential files given in input
   
   &lt;k-point dirs&gt;         One or more subdirectories <i>K00001/</i>, <i>K00002/</i>, etc, one per k-point.
</pre>
<p>Each k-point directory contains:
</p>
<pre>   <i>evc.dat</i>                containing the wavefunctions for spin-unpolarized calculations, OR
   <i>evc1.dat</i>
   <i>evc2.dat</i>               containing the spin-up and spin-down wavefunctions, respectively, 
                          for spin polarized (LSDA) calculations;
 
                          in a molecular dynamics run, also wavefunctions at the preceding time step:
   <i>evcm.dat</i>               for spin-unpolirized calculations OR
   <i>evcm1.dat</i>
   <i>evcm2.dat</i>              for spin polarized calculations;
    
   <i>gkvectors.dat</i>          with the details of specific k+G grid;
   <i>eigenval.xml</i>           containing the eigenvalues for the corresponding k-point for spin-unpolarized calculations, OR
   <i>eigenval1.xml</i>      
   <i>eigenval2.xml</i>          for spin-polarized calculations;
</pre>
<ul><li> All files <i>*.xml</i> are XML-compliant, formatted file;
</li><li> Files <i>mat_z.1</i>, <i>lambda.dat</i> are unformatted files, containing a single record;
</li><li> All other files <i>*.dat</i>, are XML-compliant files, but they contain an unformatted record.
</li></ul>
<a name="Structure_of_file_.22data-file.xml.22"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=37" title="Edit section: Structure of file &quot;data-file.xml&quot;">edit</a>]</span> <span class="mw-headline"> Structure of file "data-file.xml"</span></h4>
<ul><li> <i>XML Header</i>: whatever is needed to have a well-formed XML file
</li></ul>
<ul><li> <i>Body</i>: introduced by &lt;Root&gt;, terminated by &lt;/Root&gt;. Contains first-level tags only. These contain only other tags, not values. XML syntax applies.
</li></ul>
<ul><li> <i>First-level tags</i>: contain either
<ul><li> second-level tags
</li><li> "data tags": tags containing data (values for a given variable)
</li><li> "file tags": tags pointing to a file
</li></ul>
</li></ul>
<p><i>data tags syntax</i> ( [...] = optional )&nbsp;:
</p>
<pre>     &lt;TAG type="vartype" size="n" [UNIT="units"] [LEN="k"]&gt;
     values (in appropriate units) for variable corresponding to TAG:
     n elements of type vartype (if character, of lenght k)
     &lt;/TAG&gt;
</pre>
<p>where TAG describes the variable into which data must be read;<br />
"vartype" may be "integer", "real", "character", "logical";<br />
if type="logical", LEN=k" must be used to specify the length
of the variable character; size="n" is the dimension.<br />
Acceptable values for "units" depend on the specific tag.
</p><p><i>Short syntax</i>, used only in a few cases:
</p>
<pre>     &lt;TAG attribute="something"/&gt; . 
</pre>
<p>For instance:
</p>
<pre>     &lt;FFT_GRID nr1="NR1" nr2="NR2" nr3="NR3"/&gt;
</pre>
<p>defines the value of the FFT grid parameters nr1, nr2, nr3
for the charge density
</p>
<a name="Sample"></a><h4><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=38" title="Edit section: Sample">edit</a>]</span> <span class="mw-headline">Sample</span></h4>
<ul><li> Header:
</li></ul>
<pre>&lt;?xml version="1.0"?&gt;
&lt;?iotk version="1.0.0test"?&gt;
&lt;?iotk file_version="1.0"?&gt;
&lt;?iotk binary="F"?&gt; 
</pre>
<p>These are meant to be used only by iotk (actually they aren't)
</p>
<ul><li> First-level tags:
</li></ul>
<pre> - &lt;HEADER&gt;         (global information about fmt version)
 - &lt;CONTROL&gt;        (miscellanea of internal information)
 - &lt;STATUS&gt;         (information about the status of the CP simulation)
 - &lt;CELL&gt;           (lattice vector, unit cell, etc)
 - &lt;IONS&gt;           (type and positions of atoms in the unit cell etc)
 - &lt;SYMMETRIES&gt;     (symmetry operations)
 - &lt;ELECTRIC_FIELD&gt; (details for an eventual applied electric field)
 - &lt;PLANE_WAVES&gt;    (basis set, cutoffs etc)
 - &lt;SPIN&gt;           (info on spin polarizaztion)
 - &lt;MAGNETIZATION_INIT&gt;     (info about starting or constrained magnetization)
 - &lt;EXCHANGE_CORRELATION&gt;
 - &lt;OCCUPATIONS&gt;    (occupancy of the states)
 - &lt;BRILLOUIN_ZONE&gt; (k-points etc)
 - &lt;PHONON&gt;         (info for phonon calculations)  
 - &lt;PARALLELISM&gt;    (specialized info for parallel runs)
 - &lt;CHARGE-DENSITY&gt;
 - &lt;TIMESTEPS&gt;      (positions, velocities, nose' thermostats)
 - &lt;BAND_STRUCTURE_INFO&gt;    (dimensions and basic data about band structure)
 - &lt;EIGENVALUES&gt;    (eigenvalues and related data)
 - &lt;EIGENVECTORS&gt;   (eigenvectors and related data)
</pre>
<p><br />  
</p>
<ul><li> Tag description
</li></ul>
<pre> &lt;HEADER&gt; 
    &lt;FORMAT&gt;    (name and version of the format)
    &lt;CREATOR&gt;   (name and version of the code generating the file)
 &lt;/HEADER&gt;
</pre>
<pre> &lt;CONTROL&gt;
    &lt;PP_CHECK_FLAG&gt;    (whether the file can be used for post-processing)
    &lt;LKPOINT_DIR&gt;      (whether kpt-data are written in sub-directories)
    &lt;Q_REAL_SPACE&gt;     (whether augmentation terms are used in real space)
 &lt;/CONTROL&gt;
</pre>
<pre> &lt;STATUS&gt;  (optional)
    &lt;STEP&gt;   (number $n of steps performed, i.e. we are at step $n)
    &lt;TIME&gt;   (total simulation time)
    &lt;TITLE&gt;  (a job descriptor)
    &lt;ekin&gt;   (kinetic energy)
    &lt;eht&gt;    (hartree energy)
    &lt;esr&gt;    (Ewald term, real-space contribution)
    &lt;eself&gt;  (self-interaction of the Gaussians)
    &lt;epseu&gt;  (pseudopotential energy, local)
    &lt;enl&gt;    (pseudopotential energy, nonlocal)
    &lt;exc&gt;    (exchange-correlation energy)
    &lt;vave&gt;   (average of the potential)
    &lt;enthal&gt; (enthalpy: E+PV)
 &lt;/STATUS&gt;
</pre>
<pre> &lt;CELL&gt;
    &lt;BRAVAIS_LATTICE&gt;
    &lt;LATTICE_PARAMETER&gt;
    &lt;CELL_DIMENSIONS&gt;  (cell parameters)
    &lt;DIRECT_LATTICE_VECTORS&gt;
       &lt;UNITS_FOR_DIRECT_LATTICE_VECTORS&gt;
       &lt;a1&gt;
       &lt;a2&gt;
       &lt;a3&gt;
    &lt;RECIPROCAL_LATTICE_VECTORS&gt;
       &lt;UNITS_FOR_RECIPROCAL_LATTICE_VECTORS&gt;
       &lt;b1&gt;
       &lt;b2&gt;
       &lt;b3&gt;
 &lt;/CELL&gt;
</pre>
<pre> &lt;IONS&gt;
    &lt;NUMBER_OF_ATOMS&gt;
    &lt;NUMBER_OF_SPECIES&gt;
    &lt;UNITS_FOR_ATOMIC_MASSES&gt;
    For each $n-th species $X:
       &lt;SPECIE.$n&gt;
          &lt;ATOM_TYPE&gt;
          &lt;MASS&gt;
          &lt;PSEUDO&gt;
       &lt;/SPECIE.$n&gt;
    &lt;PSEUDO_DIR&gt;
    &lt;UNITS_FOR_ATOMIC_POSITIONS&gt;
    For each atom $n of species $X:
       &lt;ATOM.$n SPECIES="$X"&gt;
 &lt;/IONS&gt;
</pre>
<pre> &lt;SYMMETRIES&gt;
    &lt;NUMBER_OF_SYMMETRIES&gt;
    &lt;INVERSION_SYMMETRY&gt;
    &lt;NUMBER_OF_ATOMS&gt;
    &lt;UNITS_FOR_SYMMETRIES&gt;
    For each symmetry $n:
       &lt;SYMM.$n&gt;
          &lt;INFO&gt;
          &lt;ROTATION&gt;
          &lt;FRACTIONAL_TRANSLATION&gt;
          &lt;EQUIVALENT_IONS&gt;
       &lt;/SYMM.$n&gt;
 &lt;/SYMMETRIES&gt;
</pre>
<pre> &lt;ELECTRIC_FIELD&gt;  (optional)
    &lt;HAS_ELECTRIC_FIELD&gt; 
    &lt;HAS_DIPOLE_CORRECTION&gt;
    &lt;FIELD_DIRECTION&gt;
    &lt;MAXIMUM_POSITION&gt;
    &lt;INVERSE_REGION&gt;
    &lt;FIELD_AMPLITUDE&gt;
 &lt;/ELECTRIC_FIELD&gt;  
</pre>
<pre> &lt;PLANE_WAVES&gt;
    &lt;UNITS_FOR_CUTOFF&gt;
    &lt;WFC_CUTOFF&gt;
    &lt;RHO_CUTOFF&gt;
    &lt;MAX_NUMBER_OF_GK-VECTORS&gt;
    &lt;GAMMA_ONLY&gt;
    &lt;FFT_GRID&gt;
    &lt;GVECT_NUMBER&gt;
    &lt;SMOOTH_FFT_GRID&gt;
    &lt;SMOOTH_GVECT_NUMBER&gt;
    &lt;G-VECTORS_FILE&gt;       link to file "gvectors.dat"
    &lt;SMALLBOX_FFT_GRID&gt;
 &lt;/PLANE_WAVES&gt;
</pre>
<pre> &lt;SPIN&gt;
    &lt;LSDA&gt;
    &lt;NON-COLINEAR_CALCULATION&gt;
    &lt;SPIN-ORBIT_CALCULATION&gt;
    &lt;SPIN-ORBIT_DOMAG&gt;
 &lt;/SPIN&gt;
</pre>
<pre> &lt;EXCHANGE_CORRELATION&gt;
    &lt;DFT&gt;
    &lt;LDA_PLUS_U_CALCULATION&gt;
    if LDA_PLUS_U_CALCULATION
       &lt;NUMBER_OF_SPECIES&gt;
       &lt;HUBBARD_LMAX&gt;
       &lt;HUBBARD_L&gt;
       &lt;HUBBARD_U&gt;
       &lt;HUBBARD_ALPHA&gt;
    endif
 &lt;/EXCHANGE_CORRELATION&gt;
</pre>
<pre> &lt;OCCUPATIONS&gt;
    &lt;SMEARING_METHOD&gt;
    if gaussian smearing
       &lt;SMEARING_TYPE&gt;
       &lt;SMEARING_PARAMETER&gt;
    endif
    &lt;TETRAHEDRON_METHOD&gt;
    if use tetrahedra
       &lt;NUMBER_OF_TETRAHEDRA&gt;
       for each tetrahedron $t
          &lt;TETRAHEDRON.$t&gt;
    endif
    &lt;FIXED_OCCUPATIONS&gt;
    if using fixed occupations
       &lt;INFO&gt;
       &lt;INPUT_OCC_UP&gt;
       if lsda
          &lt;INPUT_OCC_DOWN&gt;
       endif
    endif
 &lt;/OCCUPATIONS&gt;
</pre>
<pre> &lt;BRILLOUIN_ZONE&gt;
    &lt;NUMBER_OF_K-POINTS&gt;
    &lt;UNITS_FOR_K-POINTS&gt;
    &lt;MONKHORST_PACK_GRID&gt;
    &lt;MONKHORST_PACK_OFFSET&gt;
    For each k-point $n:
       &lt;K-POINT.$n&gt;
 &lt;/BRILLOUIN_ZONE&gt;
</pre>
<pre> &lt;PHONON&gt; 
    &lt;NUMBER_OF_MODES&gt;
    &lt;UNITS_FOR_Q-POINT&gt;
    &lt;Q-POINT&gt;
 &lt;/PHONON&gt;
</pre>
<pre> &lt;PARALLELISM&gt;
    &lt;GRANULARITY_OF_K-POINTS_DISTRIBUTION&gt;
 &lt;/PARALLELISM&gt;
</pre>
<pre> &lt;CHARGE-DENSITY&gt;
     link to file "charge_density.rho"
 &lt;/CHARGE-DENSITY&gt;
</pre>
<pre> &lt;TIMESTEPS&gt;  (optional)
    For each time step $n=0,M
      &lt;STEP$n&gt;
         &lt;ACCUMULATORS&gt;
         &lt;IONS_POSITIONS&gt;
            &lt;stau&gt;
            &lt;svel&gt;
            &lt;taui&gt;
            &lt;cdmi&gt;
            &lt;force&gt;
         &lt;IONS_NOSE&gt;
            &lt;nhpcl&gt;
            &lt;nhpdim&gt;
            &lt;xnhp&gt;
            &lt;vnhp&gt;
         &lt;ekincm&gt;
         &lt;ELECTRONS_NOSE&gt;
            &lt;xnhe&gt;
            &lt;vnhe&gt;
         &lt;CELL_PARAMETERS&gt;
            &lt;ht&gt;
            &lt;htve&gt;
            &lt;gvel&gt;
         &lt;CELL_NOSE&gt;
            &lt;xnhh&gt;
            &lt;vnhh&gt;
         &lt;/CELL_NOSE&gt;
 &lt;/TIMESTEPS&gt;
</pre>
<pre> &lt;BAND_STRUCTURE_INFO&gt;
    &lt;NUMBER_OF_BANDS&gt;
    &lt;NUMBER_OF_K-POINTS&gt;
    &lt;NUMBER_OF_SPIN_COMPONENTS&gt;
    &lt;NON-COLINEAR_CALCULATION&gt;
    &lt;NUMBER_OF_ATOMIC_WFC&gt;
    &lt;NUMBER_OF_ELECTRONS&gt;
    &lt;UNITS_FOR_K-POINTS&gt;
    &lt;UNITS_FOR_ENERGIES&gt;
    &lt;FERMI_ENERGY&gt;
 &lt;/BAND_STRUCTURE_INFO&gt;
</pre>
<pre> &lt;EIGENVALUES&gt;
    For all kpoint $n:
        &lt;K-POINT.$n&gt;
            &lt;K-POINT_COORDS&gt;
            &lt;WEIGHT&gt;
            &lt;DATAFILE&gt;                  link to file "./K$n/eigenval.xml"
        &lt;/K-POINT.$n&gt;
 &lt;/EIGENVALUES&gt;
</pre>
<pre> &lt;EIGENVECTORS&gt;
    &lt;MAX_NUMBER_OF_GK-VECTORS&gt;
    For all kpoint $n:
        &lt;K-POINT.$n&gt;
            &lt;NUMBER_OF_GK-VECTORS&gt;
            &lt;GK-VECTORS&gt;                link to file "./K$n/gkvectors.dat"
            for all spin $s
               &lt;WFC.$s&gt;                 link to file "./K$n/evc.dat"
               &lt;WFCM.$s&gt;                link to file "./K$n/evcm.dat" (optional)
                                        containing wavefunctions at preceding step
        &lt;/K-POINT.$n&gt;
 &lt;/EIGENVECTORS&gt;
</pre>
<a name="Restart_files"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=39" title="Edit section: Restart files">edit</a>]</span> <span class="mw-headline"> Restart files</span></h3>
<a name="Modifying.2Fadding.2Fextending_Quantum-ESPRESSO"></a><h2><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=40" title="Edit section: Modifying/adding/extending Quantum-ESPRESSO">edit</a>]</span> <span class="mw-headline"> Modifying/adding/extending Quantum-ESPRESSO</span></h2>
<a name="Hints.2C_Caveats.2C_Do.27s_and_Dont.27s"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=41" title="Edit section: Hints, Caveats, Do's and Dont's">edit</a>]</span> <span class="mw-headline"> Hints, Caveats, Do's and Dont's</span></h3>
<ol><li> Before doing anything, inquire whether it is already there, or under development.
</li><li> Before starting writing code, inquire whether you can reuse code that is already available in the distribution. Avoid redundancy: the only bug-free software line is the one that doesn't exist.
</li><li> When you make some change:
<ol><li> Check that are not spoiling other people's work. In particular, search the distribution for codes using the routine or module you are modifying and change its usage or its calling sequence everywhere.
</li><li> Do not forget to add/update documentation and examples as well.
</li><li> Do not forget that your change must work on many different combinations of hardware and software, in both serial and parallel execution.
</li></ol>
</li></ol>
<a name="Programming_style_.28or_lack_of_it.29"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=42" title="Edit section: Programming style (or lack of it)">edit</a>]</span> <span class="mw-headline"> Programming style (or lack of it)</span></h3>
<p>Guidelines for developers:
</p>
<ol><li> preprocessing options should be capitalized and start with two underscores. Examples: __AIX, __LINUX, ...
</li><li> fortran commands should be capitalized: CALL something( )
</li><li> variable names should be lowercase: foo = bar/2
</li><li> indent DO's and IF's with three white spaces (editors like emacs will do this automatically for you)
</li><li> do not write crammed code: leave spaces, insert empty separation lines
</li><li> comments (introduced by a&nbsp;!) should be used to explain what is not obvious from the code, not to repeat what is already evident. Obscure comments serve no purpose.
</li><li> do not use machine-dependent extensions or sloppy syntax. Standard f90 requires that a &amp; is needed both at end of line AND at the beginning of continuation line if there is a ' ' or " " spanning two lines. Some compilers do not complain if the latter &amp; is missing, others do.
</li><li> use DP (defined in module <i>kinds</i>) to define the type of real and complex variables
</li><li> all constants should be defined to be of kind DP.  Preferred syntax: 0.0_dp.
</li><li> conversions should be explicitely indicated. For conversions to real (including taking the real part of a complex number), use DBLE.  For conversions to complex, use CMPLX. For the complex conjugate, use CONJG. For the imaginary part, use AIMAG.  Note that CMPLX is preprocessed by f_defs.h and performs an explicit cast:
</li></ol>
<pre>
    #define CMPLX(a,b)  cmplx(a,b,kind=DP)
</pre>
<p>This implies that 1) f_defs.h must be included whenever a CMPLX is present, 2) CMPLX should stay in a single line, 3) DP must be defined.
</p>
<a name="Adding_or_modifying_input_variables"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=43" title="Edit section: Adding or modifying input variables">edit</a>]</span> <span class="mw-headline"> Adding or modifying input variables</span></h3>
<p>New input variables should be added to <i>Modules/input_parameters.f90</i>,
then copied to the code internal variables in the <i>input.f90</i>
subroutine. The namelists and cards parsers are in&nbsp;:
<i>Modules/read_namelists.f90</i> and <i>Modules/read_cards.f90</i>.
Files <i>input_parameters.f90</i>, <i>read_namelists.f90</i>,
<i>read_cards.f90</i> are shared by all codes, while each code
has its own version of <i>input.f90</i>  used to copy input values
into internal variables
</p><p>EXAMPLE:
suppose you need to add a new input variable called <i>pippo</i>
to the namelist control, then:
</p>
<ul><li> add pippo to the input_parameters.f90 file containing the namelist control
</li></ul>
<pre>             INTEGER&nbsp;:: pippo = 0
             NAMELIST / control / ....., pippo
             remember: always set an initialization value!
</pre>
<ul><li> add pippo to the control_default subroutine (contained in module read_namelists.f90 )
</li></ul>
<pre>             subroutine control_default( prog )
             ...
             IF( prog == 'PW' ) pippo = 10
             ...
             end subroutine
</pre>
<p>This routine sets the default value for pippo (can be different in different codes)
</p>
<ul><li> add pippo to the control_bcast subroutine (contained in module read_namelists.f90 )
</li></ul>
<pre>               subroutine control_bcast( )
               ...
               call mp_bcast( pippo )
               ...
               end subroutine
</pre>
<a name="Using_CVS"></a><h2><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=44" title="Edit section: Using CVS">edit</a>]</span> <span class="mw-headline"> Using CVS</span></h2>
<p>The package is available read-only using anonymous CVS. Developers may have read-write access if needed. Note that the latest (development) version may not work properly, and sometimes not even compile properly. Use at your own risk.
</p><p>CVS (Concurrent Version System) is a software that allows many developers to work and maintain a single copy of a software in a central location (repository). It is installed by default on most Unix machines, or otherwise it can be very easily installed: see <a href="http://www.cvshome.org" class="external autonumber" title="http://www.cvshome.org" rel="nofollow">[1]</a>. For a tutorial, see: <a href="http://www.loria.fr/~molli/cvs/cvs-tut/cvs_tutorial_toc.html" class="external autonumber" title="http://www.loria.fr/~molli/cvs/cvs-tut/cvs_tutorial_toc.html" rel="nofollow">[2]</a> .
You will also need a working installation of ssh (secure shell) to use CVS.
</p><p>The name of the complete CVS repository is <i>O-sesame</i>, but you should use
<i>espresso</i>. The (theoretical) difference between the two is that <i>O-sesame' </i>
contains the entire repository, including parts that are not accessible via anonymous
CVS; <i>espresso</i> contains the parts that are accessible via anonymous CVS
(the actual difference between the two is presently nonexistent).
Other available repository names are <i>cp</i> and <i>pw</i>, containing respectively 
only the CP-FPMD related stuff, or the PWscf-related stuff. These modules are
defined in file /home/cvs/CVSROOT/modules on the CVS server (democritos.sissa.it).
</p>
<a name="Anonymous_CVS"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=45" title="Edit section: Anonymous CVS">edit</a>]</span> <span class="mw-headline"> Anonymous CVS</span></h3>
<p>You have to define the environment variables CVS_RSH and CVSROOT.
For csh/tcsh, use
</p>
<pre>
setenv CVS_RSH ssh
setenv CVSROOT&nbsp;:pserver:cvsanon@democritos.sissa.it:/home/cvs
</pre>
<p>For sh/ksh/bash, use
</p>
<pre>
export CVS_RSH=ssh
export CVSROOT=:pserver:cvsanon@democritos.sissa.it:/home/cvs
</pre>
<p>Then:
</p>
<pre>
cvs login
</pre>
<p>and enter password: <i>cvsanon</i>
</p>
<a name="Read.2FWrite_CVS"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=46" title="Edit section: Read/Write CVS">edit</a>]</span> <span class="mw-headline"> Read/Write CVS</span></h3>
<p>The environment variable CVS_RSH is defined as above, but CVSROOT is
set to a different value. For csh/tcsh, use
</p>
<pre>
setenv CVS_RSH ssh
setenv CVSROOT&nbsp;:ext:your-account@democritos.sissa.it:/home/cvs
</pre>
<p>For sh/ksh/bash use
</p>
<pre>
export CVS_RSH=ssh
export CVSROOT=:ext:your-account@democritos.sissa.it:/home/cvs
</pre>
<p>You need to have an account (<i>your-account</i> above) defined on 
democritos.sissa.it.
You will be prompted for your password at each cvs operation.
</p>
<a name="CVS_operations"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=47" title="Edit section: CVS operations">edit</a>]</span> <span class="mw-headline"> CVS operations</span></h3>
<p>For the first code download:
</p>
<pre>
cvs co espresso
</pre>
<p>The code appears in directory <i>espresso/</i>. To update the code to the current version:
</p>
<pre>
cvs update -dP
</pre>
<p>in the directory containing the distribution. Option <i>-d</i> ensures that newly added
directories are downloaded, <i>-P</i> that empty directories are removed. 
It is possible to download the version at a given date, or corresponding to  a given <i>tag</i> 
(set by the developers, usually just before extensive changes or at public releases).
</p><p>When updating, you should get lines looking like
</p>
<pre>
cvs server: Updating Modules
P Modules/Makefile
U Modules/control_flags.f90
</pre>
<p>where P means <i>patched</i>, U means <i>updated</i> (a new file is added); or
</p>
<pre>
M PW/Makefile
</pre>
<p>where M means <i>locally modified</i> (i.e., wrt the CVS repository
version); or
</p>
<pre>
cvs server: FPMD/control.f90 is no longer in the repository
</pre>
<p>if a file has been meanwhile deleted, or moved, or renamed; but no lines like
</p>
<pre>
C Somedir/SomeFile
cvs server: conflict while updating Somedir/SomeFile
</pre>
<p>This means that somebody else has modified the same parts of the code that you have locally modified; conflicting files will contain lines like
</p>
<pre>
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
   something
============
   something else
&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
</pre>
<p>If this happen, you must edit the file manually to remove conflicts.
</p><p>You can compare your local copy with any version of the repository
using
</p>
<pre>
cvs diff -r tag
</pre>
<p>or with the repository at a given date using
</p>
<pre>
cvs diff -D date
</pre>
<p>You can also compare two different versions/snapshots of the repository, by specifying two different tags or dates. Options <i>-i</i> (ignore case), <i>-w</i> (ignore all white spaces), <i>-b</i> (ignore changes in the number of white spaces) may be useful to distinguish true changes from esthetic ones (such as changes in indentation).
</p><p>READ-WRITE ACCESS ONLY:
</p><p>In order to save your changes to the repository, use <i>cvs commit</i>. In order to add a file, first use <i>cvs add</i>, then <i>cvs commit</i>. In order to delete a file, first use <i>cvs delete</i>, then <i>cvs commit</i>. In order to rename a file, delete the file with the old name, add the file with the new name.
</p><p>In order to add a new directory (let us say <i>dir/</i>, and if you have the permission to do so:
</p>
<ol><li> create directory<i>dir/</i>; do <i>cvs add dir</i> (this will create the CVS subdirectory in the new directory <i>dir/</i>)
</li><li> copy all files into <i>dir/</i>, then from inside <i>dir/</i> add files: <i>cvs add *.f90 Makefile</i> (for instance)
</li><li> <i>cvs commit</i> will save the new directory
</li></ol>
<a name="Web-CVS_interface"></a><h3><span class="editsection">[<a href="/wiki/index.php?title=Developer_Manual&amp;action=edit&amp;section=48" title="Edit section: Web-CVS interface">edit</a>]</span> <span class="mw-headline"> Web-CVS interface</span></h3>
<p>You will find the
<a href="http://www.democritos.it:8888/O-sesame/" class="external text" title="http://www.democritos.it:8888/O-sesame/" rel="nofollow">Web-CVS interface</a>, in particular the "Timeline"
and "Browse" options, useful to follow what has been done and what is going on in the
development version.
</p><p>Back to the <a href="/wiki/index.php/Main_Page" title="Main Page">Main Page</a>.
</p>
<!-- Saved in parser cache with key quantumdb:pcache:idhash:1365-0!1!0!!en!2 and timestamp 20080905053159 -->
<div class="printfooter">
Retrieved from "<a href="http://www.quantum-espresso.org/wiki/index.php/Developer_Manual">http://www.quantum-espresso.org/wiki/index.php/Developer_Manual</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      <!--</div>  modifica 1: punto A1 -->
     <!-- <div id="column-one"> -->
	<!-- inizio cut A2  <div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="/wiki/index.php/Developer_Manual">Article</a></li><li id="ca-talk"
	       class="new"	       ><a href="/wiki/index.php?title=Talk:Developer_Manual&amp;action=edit">Discussion</a></li><li id="ca-edit"
	       	       ><a href="/wiki/index.php?title=Developer_Manual&amp;action=edit">Edit</a></li><li id="ca-history"
	       	       ><a href="/wiki/index.php?title=Developer_Manual&amp;action=history">History</a></li>	  </ul>
	</div> fine cut A2 -->
	<!--  inizio cut A3 <div class="portlet" id="p-personal">
	  <h5>Personal tools</h5>
	  <div class="pBody">
	    <ul>
	    <li id="pt-login"><a href="/wiki/index.php?title=Special:Userlogin&amp;returnto=Developer_Manual">Log in / create account</a></li>	    </ul>
	  </div>
	</div> fine cut A3-->
	<!--</div> --><!-- modifica 1: spostamento "/div" da punto A1 -->
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(/grafica/quantum_espresso6_trasparentbg.png);"
	    href="/"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="/wiki/index.php/Main_Page">Main Page</a></li>
	     	      <li id="n-portal"><a href="/wiki/index.php/QuantumEspresso:Community_Portal">Community portal</a></li>
	     	      <li id="n-currentevents"><a href="/wiki/index.php/Current_events">Current events</a></li>
	     	      <li id="n-recentchanges"><a href="/wiki/index.php/Special:Recentchanges">Recent changes</a></li>
	     	      <li id="n-randompage"><a href="/wiki/index.php/Special:Random">Random page</a></li>
	     	      <li id="n-help"><a href="/wiki/index.php/Help:Contents">Help</a></li>
	     	      <li id="n-sitesupport"><a href="/wiki/index.php/QuantumEspresso:Site_support">Donations</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div class="pBody">
	    <form name="searchform" action="/wiki/index.php/Special:Search" id="searchform">
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go"
	        />&nbsp;<input type='submit' name="fulltext"
	        class="searchButton"
	        value="Search" />
	    </form>
	  </div>
	</div>
	<div class="portlet" id="p-tb">
	  <h5>Toolbox</h5>
	  <div class="pBody">
	    <ul>
		  		  <li id="t-whatlinkshere"><a href="/wiki/index.php/Special:Whatlinkshere/Developer_Manual">What links here</a></li>
		  		  <li id="t-recentchangeslinked"><a href="/wiki/index.php/Special:Recentchangeslinked/Developer_Manual">Related changes</a></li>
		                	      	      	      	      	      	      	      <li id="t-upload"><a href="/wiki/index.php/Special:Upload">Upload file</a></li>	      	      <li id="t-specialpages"><a href="/wiki/index.php/Special:Specialpages">Special pages</a></li>	      	      	      <li id="t-print"><a href="/wiki/index.php?title=Developer_Manual&amp;printable=yes">Printable version</a></li>
	      	    </ul>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/wiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>		<ul id="f-list">
	  <p>
	  <li id="f-lastmod"> This page was last modified 09:52, 9 July 2008.</li>	  <li id="f-viewcount">This page has been accessed 3,696 times.</li>	  </p>
	  <p>
	  	  	  	  <li id="f-about"><a href="/wiki/index.php/QuantumEspresso:About" title="QuantumEspresso:About">About QuantumEspresso</a></li>	  <li id="f-disclaimer"><a href="/wiki/index.php/QuantumEspresso:General_disclaimer" title="QuantumEspresso:General disclaimer">Disclaimers</a></li>	  	  </p>
	</ul>
      </div>
    </div>
    <!-- Served by democritos.sissa.it in 0.333 secs. -->  </body>
</html>
